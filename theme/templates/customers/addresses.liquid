<div class="page-header">
  <div class="container">
    <h1 class="page-title">My Addresses</h1>
    <p class="page-subtitle">Manage your shipping addresses</p>
  </div>
</div>

<div class="page-content">
  <div class="container">
    <div style="max-width: 900px; margin: 0 auto;">
      <a href="/account" style="color: var(--color-primary); display: inline-block; margin-bottom: 30px;">‚Üê Back to Account</a>
      
      <button onclick="document.getElementById('add-address-form').style.display = 'block'" class="btn btn-primary" style="margin-bottom: 30px;">Add New Address</button>
      
      <!-- Add Address Form -->
      <div id="add-address-form" style="display: none; background: var(--color-background-secondary); border: 1px solid var(--color-border); border-radius: 12px; padding: 30px; margin-bottom: 40px;">
        <h3 style="margin-bottom: 25px;">Add New Address</h3>
        {% form 'customer_address', customer.new_address %}
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div class="form-group" style="margin: 0;">
              <label class="form-label" for="address_first_name">First Name</label>
              <input type="text" id="address_first_name" name="address[first_name]" class="form-input" required>
            </div>
            <div class="form-group" style="margin: 0;">
              <label class="form-label" for="address_last_name">Last Name</label>
              <input type="text" id="address_last_name" name="address[last_name]" class="form-input" required>
            </div>
          </div>
          
          <div class="form-group">
            <label class="form-label" for="address_company">Company (optional)</label>
            <input type="text" id="address_company" name="address[company]" class="form-input">
          </div>
          
          <div class="form-group">
            <label class="form-label" for="address_address1">Address</label>
            <input type="text" id="address_address1" name="address[address1]" class="form-input" required>
          </div>
          
          <div class="form-group">
            <label class="form-label" for="address_address2">Apartment, suite, etc. (optional)</label>
            <input type="text" id="address_address2" name="address[address2]" class="form-input">
          </div>
          
          <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px;">
            <div class="form-group" style="margin: 0;">
              <label class="form-label" for="address_city">City</label>
              <input type="text" id="address_city" name="address[city]" class="form-input" required>
            </div>
            <div class="form-group" style="margin: 0;">
              <label class="form-label" for="address_province">State/Province</label>
              <input type="text" id="address_province" name="address[province]" class="form-input">
            </div>
            <div class="form-group" style="margin: 0;">
              <label class="form-label" for="address_zip">ZIP/Postal Code</label>
              <input type="text" id="address_zip" name="address[zip]" class="form-input" required>
            </div>
          </div>
          
          <div class="form-group">
            <label class="form-label" for="address_country">Country</label>
            <select id="address_country" name="address[country]" class="form-input" required>
              {{ all_country_option_tags }}
            </select>
          </div>
          
          <div class="form-group">
            <label class="form-label" for="address_phone">Phone (optional)</label>
            <input type="tel" id="address_phone" name="address[phone]" class="form-input">
          </div>
          
          <div class="form-group">
            <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
              <input type="checkbox" name="address[default]" value="1">
              <span>Set as default address</span>
            </label>
          </div>
          
          <div style="display: flex; gap: 15px;">
            <button type="submit" class="btn btn-primary">Save Address</button>
            <button type="button" onclick="document.getElementById('add-address-form').style.display = 'none'" class="btn btn-secondary">Cancel</button>
          </div>
        {% endform %}
      </div>
      
      <!-- Existing Addresses -->
      {% if customer.addresses.size > 0 %}
        <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px;">
          {% for address in customer.addresses %}
            <div style="background: var(--color-background-secondary); border: 1px solid var(--color-border); border-radius: 12px; padding: 25px; position: relative;">
              {% if address == customer.default_address %}
                <span style="position: absolute; top: 15px; right: 15px; background: var(--color-primary); color: #000; padding: 3px 10px; border-radius: 50px; font-size: 0.7rem; font-weight: 600;">DEFAULT</span>
              {% endif %}
              <p style="margin-bottom: 15px;">{{ address | format_address }}</p>
              <div style="display: flex; gap: 15px;">
                <a href="/account/addresses/{{ address.id }}" style="color: var(--color-primary); font-size: 0.9rem;">Edit</a>
                {% unless customer.addresses.size == 1 %}
                  <button onclick="if(confirm('Delete this address?')) Shopify.postLink('/account/addresses/{{ address.id }}', {'parameters': {'_method': 'delete'}})" style="background: none; border: none; color: var(--color-error); font-size: 0.9rem; cursor: pointer;">Delete</button>
                {% endunless %}
              </div>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <div style="text-align: center; padding: 60px; background: var(--color-background-secondary); border: 1px solid var(--color-border); border-radius: 12px;">
          <p style="color: var(--color-text-muted);">You haven't saved any addresses yet.</p>
        </div>
      {% endif %}
    </div>
  </div>
</div>
